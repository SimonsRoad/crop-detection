close all; clear all
rng(42)

%% configuration
basepathImages = '../results/';
basepathData = '../data/';

%% datasets with parameter definitions
days = [...
    struct('args', {{... % datasets from day 1
                'searchRadius', 0.05, 'alpha', 0.02, 't', 10, 'sfeSearchRadius', ...
                0.1, 'distanceMetric', 'correlation', 'minTFDist', 0.1, 'nSample', 8000 ...
           }}, 'datasets', [ ...
                "bonirob_2016-05-23-10-37-10_0.bag_offset-120.mat", ...
                "bonirob_2016-05-23-10-37-10_0.bag_offset-140.mat", ...
                "bonirob_2016-05-23-10-37-10_0.bag_offset-160.mat", ...
                "bonirob_2016-05-23-10-37-10_0.bag_offset-180.mat" ...
           ]...
    )...
    struct('args', {{... % datasets from day 2
                'searchRadius', 0.05, 'alpha', 0.02, 't', 10, 'sfeSearchRadius', ...
                0.1, 'distanceMetric', 'correlation', 'minTFDist', 0.1,'nSample', 8000
           }}, 'datasets', [ ...
                "bonirob_2016-05-31-15-10-46_6.bag_offset-20.mat", ...
                "bonirob_2016-05-31-15-10-46_6.bag_offset-40.mat", ...
                "bonirob_2016-05-31-15-10-46_6.bag_offset-60.mat", ...
                "bonirob_2016-05-31-15-10-46_6.bag_offset-100.mat" ...
           ]...
    )...
    struct('args', {{... % datasets from day 3
                'searchRadius', 0.05, 'alpha', 0.02, 't', 10, 'sfeSearchRadius', ...
                0.1, 'distanceMetric', 'correlation', 'minTFDist', 0.1,'nSample', 8000
           }}, 'datasets', [ ...
                "bonirob_2016-06-09-12-05-11_7.bag_offset-0.mat", ...
                "bonirob_2016-06-09-12-05-11_7.bag_offset-20.mat", ...
                "bonirob_2016-06-09-12-05-11_7.bag_offset-100.mat", ...
                "bonirob_2016-06-09-12-05-11_7.bag_offset-140.mat", ...
           ]...
    )
];
%% select dataset from day 1 (change to view other datasets)
data = load(strcat(basepathData, days(1).datasets{2}));

%% example detection plot 2D 
% (includes centers of the MSC landmarks 'rx', and centers of SEP labels 'bx')
figure(1)
hold on
plot.pc(data.map(:,[1,2]), data.mapColor, 'extramarkers', data.landmarksApproach, 'extramarkersize', 0.15*(1.1-data.landmarkScores), 'markersize', 20)
scatter(data.landmarksManual(:,1),data.landmarksManual(:,2), 1000,'bx')
scatter(data.landmarksMeanshift(:,1),data.landmarksMeanshift(:,2), 1000, 'rx')
hold off

%% example plot 3D
figure(2)
plot.pc(data.map, data.mapColor, 'extramarkers', data.landmarksApproach, 'extramarkersize', 0.15*(1.1-data.landmarkScores), 'markersize', 20)

